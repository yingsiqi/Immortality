# Alphaç‰ˆæœ¬æŠ€æœ¯æ ˆæ€»è§ˆ

## æ¦‚è¿°

åŸºäºImmortalityä¿®ä»™æ¸¸æˆçš„è½»é‡åŒ–å›¾å½¢å®šä½ï¼ŒAlphaç‰ˆæœ¬é‡‡ç”¨ç°ä»£WebæŠ€æœ¯æ ˆï¼Œé‡ç‚¹å…³æ³¨å¿«é€Ÿå¼€å‘ã€æˆæœ¬æ§åˆ¶å’Œç”¨æˆ·ä½“éªŒã€‚

## ğŸ¯ **æŠ€æœ¯æ ˆå®šä½**

- **æ¸¸æˆç±»å‹**: è½»é‡åŒ–å›¾å½¢ä¿®ä»™æ¸¸æˆ
- **ç¾æœ¯é£æ ¼**: æç®€é£SVG + ç²¾ç¾å›¾æ ‡
- **æ¶æ„åŸåˆ™**: äº‹ä»¶é©±åŠ¨ + å¾®æœåŠ¡ + å®æ—¶é€šä¿¡
- **å¼€å‘ç›®æ ‡**: å¿«é€Ÿè¿­ä»£ + ä½æˆæœ¬éƒ¨ç½²

## ğŸš€ **æ ¸å¿ƒæŠ€æœ¯æ ˆ**

### å‰ç«¯æŠ€æœ¯æ ˆ

#### **åŸºç¡€æ¡†æ¶**
- **React 18** + **TypeScript** - ç°ä»£åŒ–ç»„ä»¶å¼€å‘
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Tailwind CSS** - åŸå­åŒ–CSSæ¡†æ¶

#### **å›¾å½¢æ¸²æŸ“æŠ€æœ¯**
```
æ ¸å¿ƒå›¾å½¢åº“ï¼š
â”œâ”€â”€ SVG.js - è½»é‡åŒ–çŸ¢é‡å›¾å½¢
â”œâ”€â”€ react-konva - å¤æ‚äº¤äº’åœºæ™¯
â”œâ”€â”€ Framer Motion - æµç•…åŠ¨ç”»æ•ˆæœ
â””â”€â”€ Lottie - JSONåŠ¨ç”»èµ„æº
```

**å›¾å½¢åº”ç”¨åœºæ™¯**:
- **ä¿®ç‚¼ç³»ç»Ÿ**: SVGè¿›åº¦æ¡ + å¢ƒç•Œå›¾æ ‡ + çµåŠ›æµåŠ¨æ•ˆæœ
- **æˆ˜æ–—ç³»ç»Ÿ**: æŠ€èƒ½å›¾æ ‡ + ä¼¤å®³æ•°å­— + ç®€å•ç‰¹æ•ˆ
- **è§’è‰²é¢æ¿**: å±æ€§é›·è¾¾å›¾ + è£…å¤‡å±•ç¤º + çŠ¶æ€å›¾æ ‡
- **åœ°å›¾ç³»ç»Ÿ**: åŒºåŸŸåœ°å›¾ + ä½ç½®æ ‡è®° + æ¢ç´¢è¿›åº¦

#### **çŠ¶æ€ç®¡ç†**
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Query** - æœåŠ¡ç«¯çŠ¶æ€åŒæ­¥
- **Socket.IO Client** - å®æ—¶æ•°æ®é€šä¿¡

#### **UIç»„ä»¶åº“**
- **Ant Design** - ç®¡ç†åå°ç»„ä»¶
- **Headless UI** - æ¸¸æˆç•Œé¢æ— æ ·å¼ç»„ä»¶
- **React Hook Form** - è¡¨å•å¤„ç†

### åç«¯æŠ€æœ¯æ ˆ

#### **æ ¸å¿ƒæ¡†æ¶**
- **NestJS** - ä¼ä¸šçº§Node.jsæ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨å¼€å‘
- **Socket.IO** - å®æ—¶åŒå‘é€šä¿¡

#### **å¾®æœåŠ¡æ¶æ„**
```
æœåŠ¡æ¨¡å—ï¼š
â”œâ”€â”€ ç”¨æˆ·æœåŠ¡ (User Service)
â”œâ”€â”€ æ¸¸æˆé€»è¾‘æœåŠ¡ (Game Logic Service)
â”œâ”€â”€ äº‹ä»¶æº¯æºæœåŠ¡ (Event Sourcing Service)
â”œâ”€â”€ å®æ—¶é€šä¿¡æœåŠ¡ (WebSocket Service)
â””â”€â”€ æ–‡ä»¶æœåŠ¡ (Asset Service)
```

#### **æ•°æ®å­˜å‚¨**
- **PostgreSQL** - ä¸»æ•°æ®åº“
- **EventStoreDB** - äº‹ä»¶å­˜å‚¨
- **Redis** - ç¼“å­˜å’Œä¼šè¯
- **MinIO** - æ–‡ä»¶å­˜å‚¨

### å¼€å‘å·¥å…·é“¾

#### **å®¹å™¨åŒ–**
- **Docker** - åº”ç”¨å®¹å™¨åŒ–
- **Docker Compose** - æœ¬åœ°å¼€å‘ç¯å¢ƒ

#### **ä»£ç è´¨é‡**
- **ESLint** + **Prettier** - ä»£ç è§„èŒƒ
- **Husky** - Gité’©å­
- **Jest** + **Testing Library** - å•å…ƒæµ‹è¯•

#### **éƒ¨ç½²å·¥å…·**
- **GitHub Actions** - CI/CDæµæ°´çº¿
- **Nginx** - åå‘ä»£ç†

## ğŸ—ï¸ **æ¶æ„è®¾è®¡**

### å‰ç«¯æ¶æ„

```mermaid
flowchart TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚"
        A[æ¸¸æˆä¸»ç•Œé¢]
        B[è§’è‰²é¢æ¿]
        C[ä¿®ç‚¼ç•Œé¢]
        D[æˆ˜æ–—ç•Œé¢]
        E[åœ°å›¾ç•Œé¢]
    end
    
    subgraph "ç»„ä»¶å±‚"
        F[SVGå›¾å½¢ç»„ä»¶]
        G[åŠ¨ç”»ç»„ä»¶]
        H[äº¤äº’ç»„ä»¶]
        I[æ•°æ®å±•ç¤ºç»„ä»¶]
    end
    
    subgraph "çŠ¶æ€ç®¡ç†å±‚"
        J[æ¸¸æˆçŠ¶æ€]
        K[ç”¨æˆ·çŠ¶æ€]
        L[UIçŠ¶æ€]
    end
    
    subgraph "é€šä¿¡å±‚"
        M[HTTPå®¢æˆ·ç«¯]
        N[WebSocketå®¢æˆ·ç«¯]
        O[äº‹ä»¶æ€»çº¿]
    end
    
    A --> F
    B --> G
    C --> H
    D --> I
    E --> F
    
    F --> J
    G --> K
    H --> L
    I --> J
    
    J --> M
    K --> N
    L --> O
```

### åç«¯æ¶æ„

```mermaid
flowchart TB
    subgraph "APIç½‘å…³å±‚"
        A[Nginxåå‘ä»£ç†]
        B[è´Ÿè½½å‡è¡¡]
    end
    
    subgraph "åº”ç”¨æœåŠ¡å±‚"
        C[ç”¨æˆ·æœåŠ¡]
        D[æ¸¸æˆé€»è¾‘æœåŠ¡]
        E[äº‹ä»¶æº¯æºæœåŠ¡]
        F[WebSocketæœåŠ¡]
    end
    
    subgraph "æ•°æ®å­˜å‚¨å±‚"
        G[PostgreSQL]
        H[EventStoreDB]
        I[Redisç¼“å­˜]
        J[MinIOæ–‡ä»¶å­˜å‚¨]
    end
    
    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    
    C --> G
    C --> I
    D --> G
    D --> H
    E --> H
    F --> I
    
    D --> J
```

## ğŸ® **ä¿®ä»™æ¸¸æˆç‰¹è‰²åŠŸèƒ½**

### è½»é‡åŒ–å›¾å½¢å®ç°

#### **ä¿®ç‚¼ç³»ç»Ÿå¯è§†åŒ–**
```typescript
// ä¿®ç‚¼è¿›åº¦SVGç»„ä»¶ç¤ºä¾‹
interface CultivationProgressProps {
  level: number;
  experience: number;
  maxExperience: number;
  realm: string;
}

const CultivationProgress: React.FC<CultivationProgressProps> = ({
  level, experience, maxExperience, realm
}) => {
  const progress = (experience / maxExperience) * 100;
  
  return (
    <motion.div className="cultivation-panel">
      <SVG width={300} height={200}>
        {/* å¢ƒç•ŒèƒŒæ™¯ */}
        <Circle 
          cx={150} cy={100} r={80}
          fill="url(#realmGradient)"
          className="realm-circle"
        />
        
        {/* ä¿®ç‚¼è¿›åº¦ç¯ */}
        <Circle
          cx={150} cy={100} r={70}
          stroke="#gold"
          strokeWidth={4}
          strokeDasharray={`${progress * 4.4} 440`}
          className="progress-ring"
        />
        
        {/* å¢ƒç•Œå›¾æ ‡ */}
        <Text x={150} y={100} textAnchor="middle">
          {realm}
        </Text>
      </SVG>
      
      {/* çµåŠ›æµåŠ¨åŠ¨ç”» */}
      <motion.div
        className="spiritual-energy"
        animate={{ 
          opacity: [0.3, 1, 0.3],
          scale: [1, 1.1, 1]
        }}
        transition={{ 
          duration: 2,
          repeat: Infinity
        }}
      />
    </motion.div>
  );
};
```

#### **æˆ˜æ–—ç‰¹æ•ˆç³»ç»Ÿ**
```typescript
// æŠ€èƒ½é‡Šæ”¾åŠ¨ç”»
const SkillEffect: React.FC<{skillType: string}> = ({ skillType }) => {
  return (
    <Stage width={400} height={300}>
      <Layer>
        {/* æŠ€èƒ½å…‰æ•ˆ */}
        <Circle
          x={200} y={150} radius={50}
          fill="rgba(255, 215, 0, 0.8)"
          shadowBlur={20}
        />
        
        {/* ç²’å­æ•ˆæœ */}
        {Array.from({length: 20}).map((_, i) => (
          <Circle
            key={i}
            x={200 + Math.cos(i * 18) * 30}
            y={150 + Math.sin(i * 18) * 30}
            radius={3}
            fill="#FFD700"
          />
        ))}
      </Layer>
    </Stage>
  );
};
```

### äº‹ä»¶æº¯æºæ¶æ„

#### **ä¿®ä»™äº‹ä»¶å®šä¹‰**
```typescript
// ä¿®ä»™ç›¸å…³äº‹ä»¶ç±»å‹
interface CultivationEvent {
  type: 'CULTIVATION_PROGRESS' | 'REALM_BREAKTHROUGH' | 'SKILL_LEARNED';
  playerId: string;
  timestamp: Date;
  data: {
    experience?: number;
    newRealm?: string;
    skillId?: string;
    resources?: Record<string, number>;
  };
}

// äº‹ä»¶å¤„ç†å™¨
@EventHandler(CultivationEvent)
export class CultivationEventHandler {
  async handle(event: CultivationEvent) {
    switch (event.type) {
      case 'CULTIVATION_PROGRESS':
        await this.updatePlayerExperience(event);
        break;
      case 'REALM_BREAKTHROUGH':
        await this.processRealmBreakthrough(event);
        break;
      case 'SKILL_LEARNED':
        await this.addPlayerSkill(event);
        break;
    }
  }
}
```

## ğŸ“Š **æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**

### å‰ç«¯ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: è·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½
- **å›¾ç‰‡ä¼˜åŒ–**: SVGçŸ¢é‡å›¾å½¢ï¼Œæ”¯æŒæ— æŸç¼©æ”¾
- **ç¼“å­˜ç­–ç•¥**: Service Worker + HTTPç¼“å­˜
- **è™šæ‹Ÿæ»šåŠ¨**: é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

### åç«¯ä¼˜åŒ–
- **æ•°æ®åº“ç´¢å¼•**: é’ˆå¯¹æŸ¥è¯¢æ¨¡å¼ä¼˜åŒ–
- **Redisç¼“å­˜**: çƒ­ç‚¹æ•°æ®ç¼“å­˜
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨
- **äº‹ä»¶æ‰¹å¤„ç†**: æ‰¹é‡å¤„ç†äº‹ä»¶æå‡æ€§èƒ½

## ğŸ”§ **å¼€å‘ç¯å¢ƒé…ç½®**

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
docker-compose up -d

# å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# åç«¯å¼€å‘æœåŠ¡å™¨
cd backend && npm run start:dev
```

### ç¯å¢ƒå˜é‡
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:pass@localhost:5432/immortality
REDIS_URL=redis://localhost:6379
EVENTSTORE_URL=esdb://localhost:2113

# åº”ç”¨é…ç½®
JWT_SECRET=your-secret-key
FILE_STORAGE_PATH=./uploads
WEBSOCKET_PORT=3001
```

## ğŸš€ **éƒ¨ç½²ç­–ç•¥**

### Alphaç‰ˆæœ¬éƒ¨ç½²
- **å•æœåŠ¡å™¨éƒ¨ç½²**: Docker Compose
- **åŸŸå**: immortality-alpha.example.com
- **SSLè¯ä¹¦**: Let's Encryptè‡ªåŠ¨ç»­æœŸ
- **ç›‘æ§**: åŸºç¡€æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§

### æ‰©å±•è®¡åˆ’
- **Betaç‰ˆæœ¬**: Kubernetesé›†ç¾¤
- **ç”Ÿäº§ç¯å¢ƒ**: å¤šåŒºåŸŸéƒ¨ç½²
- **CDN**: é™æ€èµ„æºåŠ é€Ÿ
- **æ•°æ®åº“**: è¯»å†™åˆ†ç¦»

## ğŸ“ˆ **æŠ€æœ¯æ ˆä¼˜åŠ¿**

### å¼€å‘æ•ˆç‡
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **çƒ­é‡è½½**: å¿«é€Ÿå¼€å‘åé¦ˆ
- **ç»„ä»¶åŒ–**: å¯å¤ç”¨çš„UIç»„ä»¶
- **äº‹ä»¶é©±åŠ¨**: æ¸…æ™°çš„ä¸šåŠ¡é€»è¾‘

### æˆæœ¬æ§åˆ¶
- **è½»é‡åŒ–**: SVGå›¾å½¢ï¼Œå‡å°‘èµ„æºæ¶ˆè€—
- **å®¹å™¨åŒ–**: é«˜æ•ˆçš„èµ„æºåˆ©ç”¨
- **ç¼“å­˜ç­–ç•¥**: å‡å°‘æ•°æ®åº“å‹åŠ›
- **CDN**: é™ä½å¸¦å®½æˆæœ¬

### æ‰©å±•æ€§
- **å¾®æœåŠ¡**: ç‹¬ç«‹æ‰©å±•å„ä¸ªæœåŠ¡
- **äº‹ä»¶æº¯æº**: å®Œæ•´çš„çŠ¶æ€å†å²
- **æ— çŠ¶æ€è®¾è®¡**: æ°´å¹³æ‰©å±•å‹å¥½
- **APIä¼˜å…ˆ**: æ”¯æŒå¤šç«¯æ¥å…¥

## ğŸ¯ **ä¸‹ä¸€æ­¥è®¡åˆ’**

1. **ç¯å¢ƒæ­å»º** (1å‘¨)
   - Dockerå¼€å‘ç¯å¢ƒ
   - åŸºç¡€é¡¹ç›®ç»“æ„
   - CI/CDæµæ°´çº¿

2. **æ ¸å¿ƒåŠŸèƒ½å¼€å‘** (4å‘¨)
   - ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
   - åŸºç¡€ä¿®ä»™ç³»ç»Ÿ
   - è½»é‡åŒ–å›¾å½¢ç•Œé¢

3. **Alphaæµ‹è¯•** (2å‘¨)
   - å†…éƒ¨æµ‹è¯•
   - æ€§èƒ½ä¼˜åŒ–
   - ç”¨æˆ·åé¦ˆæ”¶é›†

4. **Betaå‡†å¤‡** (2å‘¨)
   - åŠŸèƒ½å®Œå–„
   - æ‰©å±•æ€§ä¼˜åŒ–
   - ç”Ÿäº§ç¯å¢ƒå‡†å¤‡